esphome:
  name: salt-level
  platform: ESP8266
  board: d1_mini

# Enable logging
logger:

# Enable Home Assistant API
api:

ota:
  password: "AUTOGENERATED_PASSWORD"

wifi:
  ssid: "YOUR_SSID"
  password: "YOUR_PASSWORD"

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Salt-Level Fallback Hotspot"
    password: "AUTOGENERAGED_PASSWORD"

captive_portal:

sensor:
  - platform: ultrasonic
    trigger_pin: D2
    echo_pin: D1
    name: "Salt Level"
    update_interval: 12h
    on_value_range:
      - above: 0.4
        then:
          - light.turn_on: 
              id: ws_light
              effect: "Slow Pulse"
      - below: 0.4
        then:
        - light.turn_off: ws_light

light:
  - platform: monochromatic
    name: "Water Softener Salt Indicator Light"
    output: ws_salt_level_light
    id: ws_light
    effects:
      - pulse:
          name: "Slow Pulse"
          transition_length: 1s
          update_interval: 1s

output:
  - id: ws_salt_level_light
    platform: esp8266_pwm
    pin: D3